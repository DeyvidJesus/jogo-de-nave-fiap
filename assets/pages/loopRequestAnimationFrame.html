<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8"/>
	<title> Game Loop usando requestAnimationFrame</title>
	</head>
<body>
	<canvas id="minha-tela" width="800" height="400" style="border: #F00 solid 1px;"> </canvas>  
	<script>  
		var canvas = document.getElementById('minha-tela'); 
		var ctx = canvas.getContext('2d');
		//definir o ínicio do desenho
		var x = 0
		var y = 150;
		//a função gameloop é chamada aqui
		requestAnimationFrame(gameloop);
		function gameloop() {
			if(x<=700) desenharQuadrado(x,y); //enquanto x for menor que 700 ocorre o desenho
			else clearTimeout(); //termina o game loop
			x = x + 10; //incrementar a variável x indicando o deslocamento para a direita
			//chama novamente o ciclo da animação
            requestAnimationFrame(gameloop);
		}
		function desenharQuadrado(pX,pY) {
			ctx.clearRect(0, 0, 800, 400); //antes de fazer o desenho é preciso limpar o canvas
			ctx.fillStyle = '#00F';
			ctx.fillRect(pX, pY, 100, 100);
		}
	</script>  
</body>
</html>